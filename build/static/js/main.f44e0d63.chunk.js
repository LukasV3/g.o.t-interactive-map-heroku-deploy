(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(56)},29:function(e,t,n){},32:function(e,t,n){},52:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(21),c=n.n(s),i=n(7),o=n.n(i),u=n(8),l=n(1),h=n(2),m=n(4),p=n(3),d=n(5),f=(n(29),n(32),n(9)),v=n.n(f),y=n(10),b=function(){var e=Object(u.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.get)("http://127.0.0.1:5000/api/v1/kingdoms/".concat(t,"/summary"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.get)("http://127.0.0.1:5000/api/v1/kingdoms");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),k=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.renderMap(),e.t0=this,e.next=4,g();case 4:e.t1=e.sent,e.t0.addKingdomGeojson.call(e.t0,e.t1),this.toggleLayer("kingdom");case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.props.searchResult.name&&this.selectLocation(this.props.searchResult.id,this.props.searchResult.layerName)}},{key:"selectLocation",value:function(e,t){var n=this.layers[t].getLayers().find(function(t){return t.feature.geometry.properties.id===e});this.map.flyToBounds(n.getBounds(),5),n.fireEvent("click")}},{key:"renderMap",value:function(){this.map=v.a.map("mapid",{center:[5,20],zoom:4,maxZoom:8,minZoom:4,maxBounds:[[50,-30],[-45,100]]}),this.map.zoomControl.setPosition("bottomright"),this.layers={},v.a.tileLayer("https://cartocdn-gusc.global.ssl.fastly.net/ramirocartodb/api/v1/map/named/tpl_756aec63_3adb_48b6_9d14_331c6cbc47cf/all/{z}/{x}/{y}.png",{crs:v.a.CRS.EPSG4326}).addTo(this.map)}},{key:"addKingdomGeojson",value:function(e){this.layers.kingdom=v.a.geoJSON(e,{style:{color:"#222",weight:1,opacity:.65},onEachFeature:this.onEachKingdom.bind(this)})}},{key:"onEachKingdom",value:function(e,t){var n=this;t.on({click:function(a){var r=e.properties,s=r.name,c=r.id;n.setHighlightedRegion(t),n.props.onKingdomClick(s,c)}})}},{key:"setHighlightedRegion",value:function(e){this.selected&&this.layers.kingdom.resetStyle(this.selected),this.selected=e,this.selected&&(this.selected.bringToFront(),this.selected.setStyle({color:"blue"}))}},{key:"toggleLayer",value:function(e){var t=this.layers[e];this.map.hasLayer(t)?this.map.removeLayer(t):this.map.addLayer(t)}},{key:"render",value:function(){return r.a.createElement("div",{id:"mapid",className:"map-container"})}}]),t}(r.a.Component),j=(n(52),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{ref:"container",className:"info-container"},r.a.createElement("div",{ref:"title",onClick:function(){return e.refs.container.classList.toggle("info-active")},className:"info-title"},r.a.createElement("h1",null,this.props.name||"Nothing Selected")),r.a.createElement("div",{className:"info-body"},r.a.createElement("div",{className:"info-content-container"},r.a.createElement("div",{ref:"content",className:"info-content"},this.props.summary||""))))}}]),t}(r.a.Component)),O=(n(54),n(11)),E=new(function(){function e(){Object(l.a)(this,e),this.options={keys:["name"],shouldSort:!0,threshold:.3,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1},this.searchbase=[],this.fuse=new O.a([],this.options)}return Object(h.a)(e,[{key:"addGeoJsonItems",value:function(e,t){this.searchbase=this.searchbase.concat(e.map(function(e){return{layerName:t,name:e.properties.name,id:e.properties.id}})),this.fuse=new O.a(this.searchbase,this.options)}},{key:"search",value:function(e){return this.fuse.search(e)}}]),e}()),w=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={term:""},n.onInputChange=function(e){n.setState({term:e.target.value}),n.onSearch()},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"onSearch",value:function(){var e=this;clearTimeout(this.searchDebounce),this.searchDebounce=setTimeout(function(){return e.search(e.state.term)},500)}},{key:"search",value:function(e){var t=this;this.refs.results.innerHTML="",this.searchResults=E.search(e).slice(0,10),this.searchResults.forEach(function(e){return t.displaySearchResult(e)})}},{key:"displaySearchResult",value:function(e){var t=this,n=document.createElement("div");n.textContent=e.item.name,n.addEventListener("click",function(){return t.searchResultSelected(e)}),this.refs.results.appendChild(n)}},{key:"searchResultSelected",value:function(e){this.setState({term:""}),this.refs.results.innerHTML="",this.props.onSearchClick(e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"search-container"},r.a.createElement("div",{className:"search-bar"},r.a.createElement("input",{ref:"input",type:"text",name:"search",placeholder:"Search...",value:this.state.term,className:"search-input",onChange:this.onInputChange})),r.a.createElement("div",{ref:"results",className:"search-results"}))}}]),t}(r.a.Component),S=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={selected:{},searchResult:{}},n.showInfo=function(){var e=Object(u.a)(o.a.mark(function e(t,a){var r,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(a);case 2:r=e.sent,s=r.summary,n.setState({selected:{name:t,summary:s},searchResult:{}});case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.updateSearchResult=function(e){n.setState({searchResult:e.item})},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,E.addGeoJsonItems(t,"kingdom");case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(k,{onKingdomClick:this.showInfo,searchResult:this.state.searchResult}),r.a.createElement(j,{name:this.state.selected.name,summary:this.state.selected.summary}),r.a.createElement(w,{onSearchClick:this.updateSearchResult}))}}]),t}(r.a.Component);c.a.render(r.a.createElement(S,null),document.getElementById("root"))}},[[22,2,1]]]);
//# sourceMappingURL=main.f44e0d63.chunk.js.map